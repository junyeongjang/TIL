 

## OS 정의 (Operating System Definition)

### OS is a resource allocator

-   시스템 관점에서 OS는 자원할당자라고 볼 수 있다. (Manages all resoures)
-   제한된 자원에 대해 동시에 요청이 들어오면 효율적으로 분배해주는 역할을 한다. (Decides between conflicting requests for efficient and fair resource use)
-   자원 할당은 매우 중요한 이슈이다.

### OS is a control program

-   프로그램의 동작을 통제하는 제어프로그램이라고 할 수 있다.(Controls execution of programs to prevent errors and improper use of the computer)
-   프로그램의 입출력 연산에 깊이 관여한다.

### No universally accepted definition

-   운영체제는 한 문장으로 정의하기는 쉽지 않다.
-   전체 시스템에서 OS에 속한 부분이 무엇인지에 따른 보편적인 정의는 없다.
-   다만, 초창기 운영체제가 만들어지고 사용되기 시작한 과정을 돌이켜보면, 다양한 응용 프로그램이 필요로 하는 입출력 연산들과 자원을 할당하고 제어하는 공통기능을 하나의 소프트웨어로 통합하는 과정에서 운영체제라는 소프트웨어가 탄생했다.
-   컴퓨터 하드웨어와 사용자의 중간 역활을 해주는 프로그램이라고 하기도 함
-   다른 관점에서는 새로운 컴퓨터에 운영체제를 설치하는 경우에 운영체제를 설치한 직후 컴퓨터 시스템에 담기게 되는 모든 것을 운영체제로 볼 수 있다.
-   그렇다면 '메모장'프로그램도 운영체제로 포함해야할 것인지는 의문이 든다.

### Kernel

-   전체 운영체제 중에서 컴퓨터와 동작하는 중에 항상 실행되는 부분을 따로 '커널'이라고 부른다. (커널에 포함되지 않는 프로그램을 시스템 소프트웨어 또는 응용 소프트웨어라고 함)

### OS의 목표 (Operating system goals)

1.  사용자 프로그램을 진행함 (Execute user programs and make solving user problems easier)
2.  컴퓨터 시스템을 편리하게 사용하게 해 줌 (Make the computer system convenient to use)
3.  컴퓨터 하드웨어가 효율적으로 사용될 수 있는 것 (Use the computer hardware in an efficient manner)

-   사용자의 편의성과 효율성의 조화를 이루기는 매우 힘듦

### 캐싱의 정의

-   저속의 저장장치에 저장되어있는 데이터에 대해 그 일부의 복사본을 그보다 빠른 저장장치에 보관에서 컴퓨터 동작의 성능을 향상하는 기법  
    (copying information into faster storage system; main memory can be viewed as a cache for secondary storage)  
    (메모리 계층간의 캐싱 가능)
-   컴퓨터 시스템의 여러 부분에서 동작하는 성능 향상 기법
-   주어진 하드웨어에서 최대한 빨리 데이터에 접근(캐싱의 목적)

### 캐싱의 원리

-   저속 저장장치에 담긴 원본 데이터를 고속 저장장치에 임시로 복사해놓는다.
-   이렇게 되면 CPU는 같은 데이터를 고속 저장장치에서 데이터를 가져와서 성능을 향상 시킬 수 있다.
-   단, 고속 저장장치는 저속 저장장치보다 메모리가 작기 때문에 모든 데이터를 보관할 수 없다. (일부만 캐싱할 수 있음)
-   그렇다면 원본 데이터에서 어떤 데이터를 캐싱할까? -> 일반적으로 가장 최근에 사용한 데이터를 캐싱 (가장 최근에 사용된 데이터는 가까운 미래에 다시 사용될 확률이 높아서)

### 캐싱 기법에서 데이터 접근

-   캐싱 기법에서 데이터 접근은 캐시 역할을 하는 고속 저장장치부터 탐색한다.
-   고속 장치에 원하는 데이터가 있을 경우에는 성능향상, 원하는 데이터가 없는 경우에는 원본이 있는 데이터에 접근하고 캐싱 (고속 저장장치에 저속 저장장치 원본 데이터를 복사하는 것을 (caching replacement)
-   Faster storage (cache) checked first to determine if information is there
    -   If it is, information used directly from the cache (fast)
    -   If not, data copied to cache and used there
-   모든 데이터를 캐시에 넣을 수 없다는게 중요함



# Operating System Structure

-   운영체제와 같은 크고 복잡한 소프트웨어는 잘 동작하고, 쉽게 변경할 수 있도록 구조를 만드는 것이 매우 중요
-   운영체제를 구성하는 구조들은 여러 가지가 있다.

### 모놀로식 커널 (Monolithic kernel)

-   단일형 커널
-   cpu스케쥴링, 메모리 관리 등 운영체제의 일반적인 기능들이 전부 커널이라는 하나의 프로그램에 담겨있는 구조 (전혀 계층적이지 않음)
-   계층적인 구조보다 성능적인 부분에서는 우위를 보이나, 구현과 수정이 어렵다.
-   장점 : 성능이 더 좋다.
-   단점 : 수정과 구현이 어려움 (유지보수가 어렵다)

### 계층적인 접근 (Layered Apporach)

-   계층적인 구조라면 커널 자체도 여러개의 계층으로 이루어져있어야 함.
-   전형적인 하나의 계층은 자신의 자료구조와 코드, 자신의 아래 계층의 함수에 대한 호출로 이루어짐
-   각 계층은 자신과 자신의 하위계층의 함수를 호출할 수 있다.
-   상위 계층의 입장에서는 하위 계층의 구조와 코드는 알 필요 없고 어떤 역할을 하는지만 알면 된다.
-   각 layer에 어떤 기능을 넣을 것인지 잘 설계해야 함.
-   장점 : 구현과 디버깅이 간단함 -> 각 계층은 단지 자신의 하위계층의 서비스와 기능만을 사용하기 때문에 검증과 디버깅이 매우 쉬워짐
-   ex) layer1은 layer0만 신경 쓰고 개발하면 된다.
-   단점 : 하나의 동작이 이루어지는데 여러 계층을 거치다 보니 다른 구조보다 효율성이 떨어짐



### 마이크로커널 시스템 구조 (Microkernel System Structure)

-   모놀로식 커널이 점점 커지게 되자 카네기멜런 대학 연구자들이 마이크로커널을 기반으로한 마크(Mach)를 개발함
-   마이크로커널은 기존 모놀로식 커널에 있었던 일부 기능을 떼어내어 사용자 수준 프로그램으로 구현하고, 커널에는 아주 기본적인 기능만 넣은 작은 형태의 커널을 의미함.
-   프로세스 관리, 메모리 관리, 프로세스 간 통신 -> 이 3가지 기능만 마크의 커널에 있음 (모든 마이크로커널이 그런 것은 아님)
-   메시지 전달 방식을 사용해서 (message passing) 프로그램을 동작하게 함.
-   장점: 운영체제의 확장이 쉽다(새로 추가되는 서비스는 사용자 공간에 주면 됨), 보안성이나 신뢰성이 높음(대부분 사용자 공간에 주기 때문에)
-   단점: 모놀리식 커널에 비해 성능이 떨어짐(마이크로커널은 수차례의 메시지 전달 과정이 필요하기 때문에)

### 커널 모듈 (modules)(loadable kernel modules)

-   커널의 핵심적인 기능 외에 동적으로 서비스들이 추가될 수 있는 형태
-   예를 들어 특정한 파일 시스템을 커널 모듈로 구현하면, 파일 시스템은 커널 부팅과 동시에 동작하지 않고, 필요할 때 동작하는 방식
-   장점 : 필요한 해당 기능들을 수정할 때 필요한 기능들만 수정해서 컴파일하면 됨



### 하이브리드 시스템 (Hybrid Systems)

-   오늘날의 운영체제들은 위와 같은 구조를 명확하게 사용하지 않고, 성능, 보안, 편의성을 고려해서 여러 방식을 혼용해서 사용함